/*!
 * 
 * across-tabs "1.4.1"
 * https://github.com/wingify/across-tabs
 * MIT licensed
 * 
 * Copyright (C) 2017-2023 Wingify Pvt. Ltd. - Authored by Varun Malhotra(https://github.com/softvar)
 * 
 */
this.AcrossTabs=function(e){function t(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=5)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={LOADED:"__TAB__LOADED_EVENT__",CUSTOM:"__TAB__CUSTOM_EVENT__",HANDSHAKE:"__TAB__HANDSHAKE_EVENT__",ON_BEFORE_UNLOAD:"__TAB__ON_BEFORE_UNLOAD__",PARENT_DISCONNECTED:"__PARENT_DISCONNECTED__",HANDSHAKE_WITH_PARENT:"__HANDSHAKE_WITH_PARENT__",PARENT_COMMUNICATED:"__PARENT_COMMUNICATED__"};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={INVALID_JSON:"Invalid JSON Object!",INVALID_DATA:"Some wrong message is being sent by Parent.",CONFIG_REQUIRED:"Configuration options required. Please read docs.",CUSTOM_EVENT:"CustomEvent(and it's polyfill) is not supported in this browser.",URL_REQUIRED:"Url is needed for creating and opening a new window/tab. Please read docs."};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={disable:function(e){if(!e)return!1;var t=void 0,n=document.querySelectorAll("["+e+"]");for(t=0;t<n.length;t++)n[t].setAttribute("disabled","disabled")},enable:function(e){if(!e)return!1;var t=void 0,n=document.querySelectorAll("["+e+"]");for(t=0;t<n.length;t++)n[t].removeAttribute("disabled")}};t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={},a={INDEX:"index",OBJECT:"object",BOTH:"both"};i.searchByKeyName=function(e,t,n,i){if(!e||!t)return!1;i=i||a[1];var o=void 0,r=void 0,s=void 0,u=-1;for(o=0;o<e.length;o++){if(r=e[o],!isNaN(n)&&parseInt(r[t],10)===parseInt(n,10)){u=o;break}if(isNaN(n)&&r[t]===n){u=o;break}}switch(-1===u&&(e[u]={}),i){case a.INDEX:s=u;break;case a.BOTH:s={obj:e[u],index:u};break;case a.OBJECT:default:s=e[u]}return s},t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={OPEN:"open",CLOSE:"close"};t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(6),o=i(a),r=n(12),s=i(r),u={Parent:o.default,Child:s.default};t.default=u},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(7),u=i(s),l=n(9),d=i(l),f=n(2),c=i(f),h=n(4),v=i(h),g=n(1),_=i(g),b=n(0),p=i(b),y=n(10),E=i(y),w=void 0,m=void 0,N=function(){function e(t){a(this,e),t=t||{},void 0===t.heartBeatInterval&&(t.heartBeatInterval=500),void 0===t.shouldInitImmediately&&(t.shouldInitImmediately=!0),"function"!=typeof t.parse&&(t.parse=JSON.parse),"function"!=typeof t.stringify&&(t.stringify=JSON.stringify),this.tabUtils=new d.default(t),this.postMessageListener=(0,E.default)(this.tabUtils),o(this,t),this.shouldInitImmediately&&this.init()}return r(e,[{key:"addInterval",value:function(){var e=void 0,t=this.tabUtils.getAll(),n=this.tabUtils.getOpened();if(!n||!n.length)return window.clearInterval(w),w=null,!1;for(e=0;e<t.length;e++)this.removeClosedTabs&&this.watchStatus(t[e]),t[e]&&t[e].ref&&(t[e].status=t[e].ref.closed?v.default.CLOSE:v.default.OPEN);this.onPollingCallback&&this.onPollingCallback()}},{key:"startPollingTabs",value:function(){var e=this;w=window.setInterval(function(){return e.addInterval()},this.heartBeatInterval)}},{key:"watchStatus",value:function(e){if(!e||!e.ref)return!1;var t=e.ref.closed?v.default.CLOSE:v.default.OPEN,n=e.status;if(!t||t===n)return!1;n===v.default.OPEN&&t===v.default.CLOSE&&this.tabUtils._remove(e)}},{key:"onChildUnload",value:function(e){this.onChildDisconnect&&this.onChildDisconnect(e.detail)}},{key:"customEventUnListener",value:function(e){this.enableElements(),e.detail&&e.detail.type===p.default.HANDSHAKE&&this.onHandshakeCallback?this.onHandshakeCallback(e.detail.tabInfo):e.detail&&e.detail.type===p.default.CUSTOM&&this.onChildCommunication&&this.onChildCommunication(e.detail.tabInfo)}},{key:"addEventListeners",value:function(){var e=this;window.removeEventListener("message",this.postMessageListener.onNewTab),window.addEventListener("message",this.postMessageListener.onNewTab),window.removeEventListener("onCustomChildMessage",this.customEventUnListener),window.addEventListener("onCustomChildMessage",function(t){return e.customEventUnListener(t)}),window.removeEventListener("onChildUnload",this.onChildUnload),window.addEventListener("onChildUnload",function(t){return e.onChildUnload(t)}),window.onbeforeunload=function(){e.tabUtils.broadCastAll(p.default.PARENT_DISCONNECTED)}}},{key:"enableElements",value:function(){c.default.enable("data-tab-opener")}},{key:"getAllTabs",value:function(){return this.tabUtils.getAll()}},{key:"getOpenedTabs",value:function(){return this.tabUtils.getOpened()}},{key:"getClosedTabs",value:function(){return this.tabUtils.getClosed()}},{key:"closeAllTabs",value:function(){return this.tabUtils.closeAll()}},{key:"closeTab",value:function(e){return this.tabUtils.closeTab(e)}},{key:"broadCastAll",value:function(e){return this.tabUtils.broadCastAll(e)}},{key:"broadCastTo",value:function(e,t){return this.tabUtils.broadCastTo(e,t)}},{key:"openNewTab",value:function(e){if(!e)throw new Error(_.default.CONFIG_REQUIRED);if(!e.url)throw new Error(_.default.URL_REQUIRED);return m=new u.default(this.tabUtils),m.create(e),w||this.startPollingTabs(),m}},{key:"init",value:function(){this.addEventListeners()}}]),e}();t.default=N},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(8),u=i(s),l=n(2),d=i(l),f=function(){function e(t){a(this,e),window.name=window.name||"PARENT_TAB",this.tabUtils=t}return r(e,[{key:"create",value:function(e){return e=e||{},o(this,e),this.id=u.default.generate()||this.tabUtils.tabs.length+1,this.status="open",this.ref=window.open(this.url,e.windowName||"_blank",e.windowFeatures),d.default.disable("data-tab-opener"),this.tabUtils.addNew(this),this}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});/**
 * UUID.js: The RFC-compliant UUID generator for JavaScript.
 * ES6 port of only `generate` method of UUID by Varun Malhotra under MIT License
 *
 * @author  LiosK
 * @version v3.3.0
 * @license The MIT License: Copyright (c) 2010-2016 LiosK.
 */
var i=void 0;i=function(){function e(){}return e.generate=function(){var t=e._getRandomInt,n=e._hexAligner;return n(t(32),8)+"-"+n(t(16),4)+"-"+n(16384|t(12),4)+"-"+n(32768|t(14),4)+"-"+n(t(48),12)},e._getRandomInt=function(e){return e<0?NaN:e<=30?0|Math.random()*(1<<e):e<=53?(0|Math.random()*(1<<30))+(0|Math.random()*(1<<e-30))*(1<<30):NaN},e._getIntAligner=function(e){return function(t,n){for(var i=t.toString(e),a=n-i.length,o="0";a>0;a>>>=1,o+=o)1&a&&(i=o+i);return i}},e._hexAligner=e._getIntAligner(16),e.prototype.toString=function(){return this.hexString},e}(),t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(0),s=i(r),u=n(3),l=i(u),d=n(4),f=i(d),c=n(1),h=i(c),v=function(){function e(t){a(this,e),this.tabs=[],this.config=t||{}}return o(e,[{key:"_remove",value:function(e){var t=void 0;t=l.default.searchByKeyName(this.tabs,"id",e.id,"index"),this.tabs.splice(t,1)}},{key:"_preProcessMessage",value:function(e){try{e=this.config.stringify(e)}catch(e){throw new Error(h.default.INVALID_JSON)}return e&&-1===e.indexOf(s.default.PARENT_COMMUNICATED)&&(e=s.default.PARENT_COMMUNICATED+e),e}},{key:"addNew",value:function(e){return this.tabs.push(e),this}},{key:"getOpened",value:function(){return this.tabs.filter(function(e){return e.status===f.default.OPEN})}},{key:"getClosed",value:function(){return this.tabs.filter(function(e){return e.status===f.default.CLOSE})}},{key:"getAll",value:function(){return this.tabs}},{key:"closeTab",value:function(e){var t=l.default.searchByKeyName(this.tabs,"id",e);return t&&t.ref&&(t.ref.close(),t.status=f.default.CLOSE),this}},{key:"closeAll",value:function(){var e=void 0;for(e=0;e<this.tabs.length;e++)this.tabs[e]&&this.tabs[e].ref&&(this.tabs[e].ref.close(),this.tabs[e].status=f.default.CLOSE);return this}},{key:"broadCastAll",value:function(e,t){var n=void 0,i=this.getOpened();for(e=this._preProcessMessage(e),n=0;n<i.length;n++)this.sendMessage(i[n],e,t);return this}},{key:"broadCastTo",value:function(e,t,n){var i=void 0,a=this.getAll();return t=this._preProcessMessage(t),i=l.default.searchByKeyName(a,"id",e),this.sendMessage(i,t,n),this}},{key:"sendMessage",value:function(e,t,n){var i=this.config.origin||"*";if(n&&e.ref[0])for(var a=0;a<e.ref.length;a++)e.ref[a].postMessage(t,i);else e.ref&&e.ref.top&&e.ref.top.postMessage(t,i)}},{key:"reset",value:function(){this.tabs=[]}}]),e}();t.default=v},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){var t={};return t._onLoad=function(t,n){var i=void 0,a=void 0,o=void 0,s=t.split(d.default.LOADED)[1];if(s)try{s=e.config.parse(s),s.id&&(a=e.getAll(),a.length&&(i=r.default.searchByKeyName(a,"id",s.id))&&(i.name=s.name||s.windowName))}catch(e){throw new Error(u.default.INVALID_JSON)}if(i||(a=e.getAll(),i=a.find(function(e){return e.ref===n})),!i&&n&&(a=e.getAll(),i=a.find(function(e){return e.ref===n})),i)try{o=d.default.HANDSHAKE_WITH_PARENT,o+=e.config.stringify({id:i.id,name:i.name||i.windowName,parentName:window.name}),e.sendMessage(i,o,s&&s.isSiteInsideFrame)}catch(e){throw new Error(u.default.INVALID_JSON)}},t._onCustomMessage=function(t,n){var i=void 0,a=void 0,o=t.split(n)[1];try{o=e.config.parse(o)}catch(e){throw new Error(u.default.INVALID_JSON)}a={tabInfo:o,type:n},i=new CustomEvent("onCustomChildMessage",{detail:a}),window.dispatchEvent(i)},t._onBeforeUnload=function(t){var n=t.split(d.default.ON_BEFORE_UNLOAD)[1];try{n=e.config.parse(n)}catch(e){throw new Error(u.default.INVALID_JSON)}var i=new CustomEvent("onChildUnload",{detail:n});window.dispatchEvent(i)},t.onNewTab=function(n){var i=n.source,a=n.data;return!(!a||"string"!=typeof a||!e.tabs.length)&&((!e.config.origin||e.config.origin===n.origin)&&void(a.indexOf(d.default.LOADED)>-1?t._onLoad(a,i):a.indexOf(d.default.CUSTOM)>-1?t._onCustomMessage(a,d.default.CUSTOM):a.indexOf(d.default.HANDSHAKE)>-1?t._onCustomMessage(a,d.default.HANDSHAKE):a.indexOf(d.default.ON_BEFORE_UNLOAD)>-1&&t._onBeforeUnload(a)))},t}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),r=i(o),s=n(1),u=i(s),l=n(0),d=i(l);n(11),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t.detail),n}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.CustomEvent=e)}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(0),u=i(s),l=n(1),d=i(l),f=function(){function e(t){a(this,e),this.sessionStorageKey="__vwo_new_tab_info__",t||(t={}),void 0===t.handshakeExpiryLimit&&(t.handshakeExpiryLimit=5e3),void 0===t.shouldInitImmediately&&(t.shouldInitImmediately=!0),"function"!=typeof t.parse&&(t.parse=JSON.parse),"function"!=typeof t.stringify&&(t.stringify=JSON.stringify),this.tabName=window.name,this.tabId=null,this.tabParentName=null,o(this,t),this.config=t,this.shouldInitImmediately&&this.init()}return r(e,[{key:"_isSessionStorage",value:function(){try{return!!("sessionStorage"in window&&window.sessionStorage)}catch(e){return!1}}},{key:"_getData",value:function(){return!!this.isSessionStorageSupported&&window.sessionStorage.getItem(this.sessionStorageKey)}},{key:"_setData",value:function(e){return!!this.isSessionStorageSupported&&(window.sessionStorage.setItem(this.sessionStorageKey,e),e)}},{key:"_restoreData",value:function(){if(!this.isSessionStorageSupported)return!1;if(this.isSessionStorageSupported){var e=this._getData();this._parseData(e)}}},{key:"_parseData",value:function(e){var t=void 0;try{t=this.config.parse(e),this.tabId=t&&t.id,this.tabName=t&&t.name,this.tabParentName=t&&t.parentName}catch(e){throw new Error(d.default.INVALID_DATA)}}},{key:"onCommunication",value:function(e){var t=this,n=void 0,i=e.data;if(i&&"string"==typeof i&&(!this.config.origin||this.config.origin===e.origin)){if(window.clearTimeout(this.timeout),i.indexOf(u.default.PARENT_DISCONNECTED)>-1&&(this.config.onParentDisconnect&&this.config.onParentDisconnect(),window.removeEventListener("message",function(e){return t.onCommunication(e)})),i.indexOf(u.default.HANDSHAKE_WITH_PARENT)>-1){var a=void 0;n=i.split(u.default.HANDSHAKE_WITH_PARENT)[1],this._setData(n),this._parseData(n),a={id:this.tabId,isSiteInsideFrame:this.config.isSiteInsideFrame},this.sendMessageToParent(a,u.default.HANDSHAKE),this.config.onInitialize&&this.config.onInitialize()}if(i.indexOf(u.default.PARENT_COMMUNICATED)>-1){n=i.split(u.default.PARENT_COMMUNICATED)[1];try{n=this.config.parse(n)}catch(e){throw new Error(d.default.INVALID_JSON)}this.config.onParentCommunication&&this.config.onParentCommunication(n)}}}},{key:"addListeners",value:function(){var e=this;window.onbeforeunload=function(t){var n={id:e.tabId,isSiteInsideFrame:e.config.isSiteInsideFrame};e.sendMessageToParent(n,u.default.ON_BEFORE_UNLOAD)},window.removeEventListener("message",function(t){return e.onCommunication(t)}),window.addEventListener("message",function(t){return e.onCommunication(t)})}},{key:"setHandshakeExpiry",value:function(){var e=this;return window.setTimeout(function(){e.config.onHandShakeExpiry&&e.config.onHandShakeExpiry()},this.handshakeExpiryLimit)}},{key:"sendMessageToParent",value:function(e,t){var n=void 0;e=(t||u.default.CUSTOM)+this.config.stringify(e),window.top.opener&&(n=this.config.origin||"*",window.top.opener.postMessage(e,n))}},{key:"getTabInfo",value:function(){return{id:this.tabId,name:this.tabName,parentName:this.tabParentName,isSiteInsideFrame:this.config.isSiteInsideFrame}}},{key:"init",value:function(){this.isSessionStorageSupported=this._isSessionStorage(),this.addListeners(),this._restoreData(),this.sendMessageToParent(this.getTabInfo(),u.default.LOADED),this.timeout=this.setHandshakeExpiry(),this.config.onReady&&this.config.onReady()}}]),e}();t.default=f}]);